map "http://smart.who.int/icvp/StructureMap/PreQualDBtoProductAuthorizationLM" = "PreQualDBtoProductAuthorizationLM"
uses "http://smart.who.int/icvp/StructureDefinition/PreQualDBwithIDs" alias PreQualDB as source
uses "http://smart.who.int/icvp/StructureDefinition/ProductAuthorization" alias ProductAuthorization as target




group PreQualDBtoProductAuthorizationLM(source prequal: PreQualDB, target productAuth : ProductAuthoization) {
   prequal as prequal then {
   	productAuth.status = #active "set status";
	productAuth.type = #prequal "set type";
	productAuth.jurisdiction.coding.display = "WHO" "set jurisdiction";
   }
   prequal.index as index then {
   	productAuth.number = index "set number/index";
        prequal.vaxTypeCode as vaxTypeCode then {
           productAuth.product = Reference(resolve(vaxTypeCode + "Product" + index.value )  "Set Product reference";
        }		       
   }
   prequal.responsibleNRAReference as respNRARef then {
   	productAuth.holder = respNRARef "set national regulatory authority holder";
   }
   prequal.validityPeriod as validityPeriod then {
        productAuth.validityPeriod = validityPeriod "set validity period";
   }
}